--- bullet-2.81-rev2613/src/LinearMath/btScalar.h.in
+++ bullet-2.81-rev2613/src/LinearMath/btScalar.h.in
@@ -17,2 +17,6 @@
 #ifndef BT_SCALAR_H
+#define BT_SCALAR_H
+
+${CMAKE_ENABLE_DOUBLE_PRECISION}
+
 
--- bullet-2.81-rev2613/src/LinearMath/CMakeLists.txt	2012-09-09 13:22:30.000000000 -0400
+++ bullet-2.81-rev2613/src/LinearMath/CMakeLists.txt	2014-04-03 10:28:03.499234926 -0400
@@ -43,6 +43,13 @@
 	btVector3.h
 )
 
+IF (USE_DOUBLE_PRECISION)
+  SET(CMAKE_ENABLE_DOUBLE_PRECISION "#ifndef BT_USE_DOUBLE_PRECISION\n#define BT_USE_DOUBLE_PRECISION\n#endif")
+ELSE (USE_DOUBLE_PRECISION)
+  SET(CMAKE_ENABLE_DOUBLE_PRECISION "")
+ENDIF (USE_DOUBLE_PRECISION)
+CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/btScalar.h.in ${CMAKE_CURRENT_SOURCE_DIR}/btScalar.h)
+
 ADD_LIBRARY(LinearMath ${LinearMath_SRCS} ${LinearMath_HDRS})
 SET_TARGET_PROPERTIES(LinearMath PROPERTIES VERSION ${BULLET_VERSION})
 SET_TARGET_PROPERTIES(LinearMath PROPERTIES SOVERSION ${BULLET_VERSION})
